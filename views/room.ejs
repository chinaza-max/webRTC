<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

<style>
   body{
     background-color: white;
   }
   .section1{
    background-color: white;

   }
   #videoSection{
    min-height: 100vh;
    background-color: rgb(218, 218, 218);
   }
   p{
    color: rgb(154, 153, 153); ;
   }
   h6,h5,h4,h3{
    color: black;
   }
   #other{
    background-color: transparent
   }
   .section{
    margin-top: 20px;
   }

   .alert-light {
    color: #636464;
    background-color: #f4f4f4;
    border-color: #fdfdfe;
    }

    .section2 {
      width: 100%;
      height: 40vh;
    }
    .section2 video{
        width: 100%;        
        width: 100%;
        height: 100%; 
        object-fit: cover;
    }
    .section3  video{
      width: 200px;
      height: 200px;
    }
    .Participant{
      background-color: #f4f4f4;
      position: relative;
    }
    video{
      border-radius: 5%;
    }
  
    img{
      width: 40px;
      height: 40px;
    }
    .myParticipant{
      background-color: white;
    }



    #text{
        position: absolute;
        top: -15px;
        width: 100px;
        left: -20px;
    }
    .grid-container {
      padding-bottom: 70px;
      display: grid;
      grid-template-columns: 100%; /* Initially, one item per row */
      gap: 10px; /* Adjust gap between items as needed */
      justify-content: center;
      align-content: center;
    }
    video{
        width: 100%;
        height: 100%;
    }

    /* Media query for larger screens */
    @media (min-width: 600px) {
      .grid-container {
        grid-template-columns: repeat(auto-fit, minmax(150px, 300px)); /* Allow more items per row, with maximum width of 300px */
      }
    }

    /* Example grid item styles (adjust as needed) */
    .grid-item {
      background-color: #f0f0f0;
      padding: 20px;
      text-align: center;
      background-size: cover; 
      background-repeat: no-repeat;
      aspect-ratio: 1 / 1;
      border-radius: 20px;
    }
    

    .controls {
        margin-top: 30px;
        min-width: 200px;
        max-width: 400px;
        margin: 0 auto;
        display: flex;
        justify-content: space-around;
        position: fixed;
        bottom: 20px;
        width: 100%;
        left: 50%;
        transform: translateX(-50%);
        background-color: #f0f0f0;
    }
    #Admit{
      background-color: blue;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      display: inline-block;
      line-height: 45px;
      color: white;

    }


    @media (max-width: 999px) {
      #others{
          display: none;
      }
      .col-md-12 {
        width: 100%; 
      }
    }

    @media (max-width: 500px) {

      .section2 {
        width: 100%;
        height: 30vh;
      }
      .section3  video{
        width: 135px;
        height: 135px;
      }

    }

    @media (max-width: 315px) {
     
     .section2 video{
       height: 30vh;
     }
     .section3  video{
       width: 105px;
       height: 105px;
     }

   }
    
   
    #endCall{
        background-color: blue;
        cursor: pointer;
        display: inline-block;
        width: 40px;
        height: 40px;
        border-radius: 50%; /* Creates a circle */
        position: relative;
        bottom: 0px;
    }

    #endCall i{
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
    }

    




    /* HTML: */
.loader {
  width: 50px;
  aspect-ratio: 1;
  display: grid;
  border-radius: 50%;
  background:
    linear-gradient(0deg ,rgb(0 0 0/50%) 30%,#0000 0 70%,rgb(0 0 0/100%) 0) 50%/8% 100%,
    linear-gradient(90deg,rgb(0 0 0/25%) 30%,#0000 0 70%,rgb(0 0 0/75% ) 0) 50%/100% 8%;
  background-repeat: no-repeat;
  animation: l23 1s infinite steps(12);
}
.loader::before,
.loader::after {
   content: "";
   grid-area: 1/1;
   border-radius: 50%;
   background: inherit;
   opacity: 0.915;
   transform: rotate(30deg);
}
.loader::after {
   opacity: 0.83;
   transform: rotate(60deg);
}
@keyframes l23 {
  100% {transform: rotate(1turn)}
}


#loaderContainer{
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;  
  display: flex;
  justify-content: center;
  align-items: center;
  margin: auto;
  z-index: 10000;
}


</style>
<script defer src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    const roomID= '<%= roomId %>' 

</script>
<script src="/socket.io/socket.io.js" defer></script>

<script src="/script.js" defer></script>

<body> 

  <div class="container" >
    <div class="row">

      <div class="col-lg-8   col-md-12" id="videoSection">
        <div class="d-none section section1 rounded-pill pt-3">

          <div class="container">

            <div class="row">
              <div class="col">
                <h6>Sprinting Planning Project-work</h6>
                <p>mind care Meeting </p>
              </div>
              <div class="col">
                <div class="alert alert-light rounded-pill" role="alert">
                  <strong>Nico</strong> -- want to join the meeting <div  id="Admit">Admit</div>
                </div>
              </div>
            </div>

          </div>


        </div>

        <div class="section section2">

          <video id="myVideo"  src=""></video>
        </div>

        <div class="section section3">
            <div id="remoteVideo" class="d-flex justify-content-between flex-lg-row flex-wrap">
                
            </div>
        </div>

      </div>

      <div class="col-4" id="others">

        <div class="container mt-5 mb-2">

          <div class="d-flex justify-content-between">
            <div><h5>Participant</h5> </div>
            <div><p>View all</p></div>
          </div>
  
          <div class="Participant p-2 rounded">
              <div class="rounded-pill mt-2 mb-2 myParticipant">
                <div class="d-flex justify-content-between p-2 ">
                  <div> <img src="/avatar.jpg" class="rounded-circle" alt=""> me</div>
                  <div class="d-flex align-items-center justify-content-between" style="width:50px;">
                      <div> 
                        <i class='fas fa-video' style='font-size:18px;color:black'></i>
                      </div>
                      <div class="ml-2">
                        <i class='fas fa-microphone' style='font-size:18px;color:black'></i>
                      </div>
                  </div>
                </div>
              </div>

              <div class="rounded-pill mt-2 mb-2 myParticipant">
                <div class="d-flex justify-content-between p-2 ">
                  <div> <img src="/avatar.jpg" class="rounded-circle" alt=""> me</div>
                  <div class="d-flex align-items-center justify-content-between" style="width:50px;">
                      <div> 
                        <i class='fas fa-video' style='font-size:18px;color:black'></i>
                      </div>
                      <div class="ml-2">
                        <i class='fas fa-microphone' style='font-size:18px;color:black'></i>
                      </div>
                  </div>
                </div>
              </div>
              <div class="rounded-pill mt-2 mb-2 myParticipant">
                <div class="d-flex justify-content-between p-2 ">
                  <div> <img src="/avatar.jpg" class="rounded-circle" alt=""> me</div>
                  <div class="d-flex align-items-center justify-content-between" style="width:50px;">
                      <div> 
                        <i class='fas fa-video' style='font-size:18px;color:black'></i>
                      </div>
                      <div class="ml-2">
                        <i class='fas fa-microphone' style='font-size:18px;color:black'></i>
                      </div>
                  </div>
                </div>
              </div>
              


          </div>


        </div>

        <div class="container mt-5">

          <div class="d-flex justify-content-between">
            <div><h5>Chat</h5> </div>
            <div><p>View all</p></div>
          </div>
  
          <div class="Participant p-2 rounded">
              <div class="rounded-pill mt-2 mb-2  p-2">
                  <div class="container mb-2">
                    <div class="row">
                      <div class="col-2"> 
                        <img src="/avatar.jpg" class="rounded-circle" alt=""> 
                      </div>
    
                      <div class="col-10"  style="min-width: 200px;">
                          <div>
                            <div class="d-flex justify-content-between">
                               <p> <strong>Park </strong></p>
                               <p>09:31 AM</p>
                            </div>
                          </div>
                          <div>   
                             <p class="rounded-pill px-2 pb-2 pt-2" style="background-color: #fff;">let discuss</p>
                          </div>
    
                      </div>
    
                    </div>
                  </div>

                  <div class="container mb-2">
                    <div class="row">
                      <div class="col-2"> 
                        <img src="/avatar.jpg" class="rounded-circle" alt=""> 
                      </div>
    
                      <div class="col-10" style="min-width: 200px;">
                          <div>
                            <div class="d-flex justify-content-between">
                               <p> <strong >Park </strong></p>
                               <p>09:31 AM</p>
                            </div>
                          </div>
                          <div>   
                             <p class="rounded-pill px-2 pb-2 pt-2" style="background-color: #fff;">Hi guys</p>
                          </div>
    
                      </div>
    
                    </div>
                  </div>
              </div>
             

             
          </div>


        </div>
        

      </div>

    </div>
  </div>




    <div id="loaderContainer">
        <div class="loader"></div> 
    </div>

  

    <div class="controls rounded-pill pt-2 pb-2" style="margin-top: 10px;">

        <span id="videoContainer">
            <i id="videoOff" class="fas fa-video-slash" style='font-size:32px;color:red'></i>
            <i id="videoOn" class='fas fa-video' style='font-size:32px;color:blue'></i>
        </span>

        <span id="micContainer">
            <i id="micOff" class='fas fa-microphone-slash' style='font-size:32px;color:red'></i>
            <i id="micOn" class='fas fa-microphone' style='font-size:32px;color:blue'></i>
        </span>


        <span id="endCall">
            <span id="text"></span>
            <i class='fas fa fa-clipboard' style='font-size:20px;color:white'></i>
        </span>


      </div>
</body>

</html>


<script>


let mic=1
let video=1

$("#micOn").hide()
$("#videoOn").hide()


$("#micContainer").on("click", function() {

    if (mic == 1) {
    $("#micOn").show()
    $("#micOff").hide()
    mic = 2;
  } else {
    $("#micOn").hide()
    $("#micOff").show()
    mic = 1;
  }
});

$("#videoContainer").on("click", function() {
    if (video == 1) {
        $("#videoOn").show()
        $("#videoOff").hide()
        video = 2;

        //startVideoStream(false, true)        
    } else {
        $("#videoOn").hide()
        $("#videoOff").show()
        video = 1;

       // startVideoStream(true, true)
    }
});




</script>
